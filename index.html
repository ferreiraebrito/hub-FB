<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Hub de Aplicações - F&B</title>
    <meta name="theme-color" content="#1e293b"> 
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />

    <style>
        /* === Reset e base === */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            overflow: hidden; 
            background-color: #f1f5f9; 
        }

        /* === SPLASH SCREEN (Entrada) === */
        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #ffffff;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease-out;
        }
        #splash-screen img { width: 70%; max-width: 200px; height: auto; }
        #splash-screen.hidden { opacity: 0; pointer-events: none; }

        /* === LOADER (Giratória de Carregamento) === */
        #loader-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            z-index: 50;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e2e8f0;
            border-top: 4px solid #2563eb; /* Azul */
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        .loading-text {
            margin-top: 15px;
            color: #64748b;
            font-size: 14px;
            font-weight: 500;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* === Layout Principal === */
        .app-container {
            height: 100%;
            width: 100%;
            display: flex;
            flex-direction: column;
            visibility: hidden;
        }
        
        #splash-screen.hidden + .app-container { visibility: visible; }

        /* === HEADER SUPERIOR (Responsivo) === */
        #top-header {
            width: 100%;
            height: 70px; /* Aumentado para acomodar logo maior */
            background-color: #ffffff;
            display: flex;
            align-items: center;
            /* Mobile: Centraliza o conteúdo (logo) */
            justify-content: center; 
            padding: 0 20px;
            box-shadow: 0 1px 5px rgba(0,0,0,0.05);
            z-index: 100;
            flex-shrink: 0;
        }

        .header-brand {
            display: flex;
            align-items: center;
            gap: 0; 
        }

        .header-logo {
            height: 50px; /* Aumentado (era 35px) */
            width: auto;
            display: block; 
        }

        /* === Área de Conteúdo (Iframes) === */
        #content {
            flex-grow: 1;
            width: 100%;
            border: none;
            overflow: hidden;
            background: #f8fafc;
            position: relative;
        }
        
        .app-iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: none;
        }
        
        .app-iframe.active {
            display: block;
        }

        /* === NAVBAR (Dark Mode Fixo) === */
        #navbar {
            width: 100%;
            flex-shrink: 0; 
            background-color: #1e293b !important; 
            padding-bottom: max(10px, env(safe-area-inset-bottom)); 
            padding-top: 10px;
            padding-left: 24px; 
            padding-right: 24px;
            display: flex;
            flex-direction: row; 
            justify-content: space-between; 
            align-items: center;
            height: 75px; 
            box-shadow: 0 -4px 20px rgba(0,0,0,0.3); 
            z-index: 100;
        }

        #navbar button {
            background: transparent; 
            color: #94a3b8 !important; 
            border: none;
            padding: 0;
            font-size: 10px; 
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 60px; 
            position: relative;
        }

        #navbar button .material-symbols-rounded {
            font-size: 26px; 
            margin-bottom: 5px;
            transition: transform 0.2s ease;
        }
        
        #navbar button:active { transform: scale(0.95); }

        #navbar button.ativo { color: #60a5fa !important; }
        
        #navbar button.ativo .material-symbols-rounded {
            font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
            transform: translateY(-3px); 
            color: #60a5fa !important;
            text-shadow: 0 0 15px rgba(96, 165, 250, 0.5); 
        }
        
        #navbar button.ativo::after {
            content: '';
            position: absolute;
            bottom: -5px; 
            width: 4px;
            height: 4px;
            background-color: #60a5fa;
            border-radius: 50%;
        }

        /* --- AJUSTES PARA DESKTOP (Telas maiores) --- */
        @media (min-width: 768px) {
            /* Header Superior no Desktop */
            #top-header {
                justify-content: flex-start; /* Alinha a esquerda no PC */
            }

            /* Navbar inferior no Desktop */
            #navbar { height: 80px; justify-content: center; gap: 30px; border-top: 1px solid #334155; }
            #navbar button { flex-direction: row; gap: 10px; width: auto; padding: 10px 20px; font-size: 14px; color: #cbd5e1 !important; }
            #navbar button:hover { background-color: rgba(255, 255, 255, 0.05); border-radius: 8px; }
            #navbar button.ativo { background-color: rgba(59, 130, 246, 0.2) !important; color: #60a5fa !important; border-radius: 8px; }
            #navbar button.ativo .material-symbols-rounded { transform: none; }
            #navbar button.ativo::after { display: none; }
        }
    </style>
</head>

<body>

    <div id="splash-screen">
        <img src="https://i.postimg.cc/RF8h0M0M/logo-horizontal.jpg" alt="Logo Ferreira & Brito">
    </div>

    <div class="app-container">
        
        <div id="top-header">
            <div class="header-brand">
                <img src="https://i.postimg.cc/RF8h0M0M/logo-horizontal.jpg" class="header-logo" alt="Logo">
            </div>
        </div>

        <div id="content">
            <div id="loader-overlay">
                <div class="spinner"></div>
                <div class="loading-text">Carregando aplicação...</div>
            </div>
            </div>
        
        <div id="navbar">
            <button type="button" class="ativo" data-app-key="armazem">
                <span class="material-symbols-rounded">warehouse</span>
                <span>Expedição</span>
            </button>
            <button type="button" data-app-key="recebimento">
                <span class="material-symbols-rounded">local_shipping</span>
                <span>Receb.</span>
            </button>
            <button type="button" data-app-key="manutencao">
                <span class="material-symbols-rounded">build</span>
                <span>Manut.</span>
            </button>
<button type="button" data-app-key="portal">
    <span class="material-symbols-rounded">badge</span>
    <span>Portal</span>
</button>
            <button type="button" data-app-key="financeiro">
                <span class="material-symbols-rounded">attach_money</span>
                <span>Finan.</span>
            </button>
        </div>
    </div>
        
    <script>
        const APP_URLS = {
            armazem: "https://script.google.com/macros/s/AKfycbyab_sgqJiVLi12LUmapzIwvC8l-T4e19NR9xgTBmzQwRSRrbD6zjqSvEo2mutMP_UA/exec",
            manutencao: "https://script.google.com/macros/s/AKfycbxjp_5JjVFjaqCzwLTuvIl-8BKM6w0rRV2hHZhOBKlgtSbojfMaLf2h7EwWwK7hwaJ8/exec",
            recebimento: "https://script.google.com/macros/s/AKfycby0Kfn5hKWYraZeLncpMYL_QoeYcbeOUuhhARxS57GtRzzunY06kL2Jcx9_D6ul5nlY/exec",
            portal: "https://script.google.com/macros/s/AKfycbzOY_DDE7i6mo1dX-2cVMQlyDvWAjsJAYf9D0xaon5J-vCLuuWRrlT2OGs0DIrH0fsyKg/exec",
            financeiro: "https://script.google.com/macros/s/AKfycbwbIFpn8L9PpF8_-X9cqIKtECKCdH55Ta2PDnRLVf6oP3wXlBTao3eDg5VKofta5e2y/exec"
        };
        
        const contentDiv = document.getElementById('content');
        const navContainer = document.getElementById('navbar'); 
        const navBotoes = navContainer.querySelectorAll('button');
        const loader = document.getElementById('loader-overlay');
        
        const loadedApps = {};

        function loadApp(appKey) {
            navBotoes.forEach(btn => {
                const isActive = btn.dataset.appKey === appKey;
                btn.classList.toggle('ativo', isActive);
                const icon = btn.querySelector('.material-symbols-rounded');
                icon.style.fontVariationSettings = isActive 
                    ? "'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24"
                    : "'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24";
            });

            document.querySelectorAll('.app-iframe').forEach(frame => {
                frame.classList.remove('active');
            });

            if (loadedApps[appKey]) {
                loadedApps[appKey].classList.add('active');
            } else {
                showLoader();
                
                const newIframe = document.createElement('iframe');
                newIframe.src = APP_URLS[appKey];
                newIframe.className = 'app-iframe active';
                newIframe.title = appKey;
                
                newIframe.onload = () => {
                    hideLoader();
                };

                contentDiv.appendChild(newIframe);
                loadedApps[appKey] = newIframe; 
            }
        }

        function showLoader() {
            loader.style.display = 'flex';
        }

        function hideLoader() {
            loader.style.display = 'none';
        }

        document.addEventListener("DOMContentLoaded", () => {
            navBotoes.forEach(btn => {
                btn.addEventListener('click', () => { 
                    if(btn.dataset.appKey) {
                        loadApp(btn.dataset.appKey); 
                    }
                });
            });
            
            // Inicia com Armazem
            loadApp('armazem');

            // Remove Splash Screen
            const splash = document.getElementById('splash-screen');
            setTimeout(() => {
                splash.classList.add('hidden');
                setTimeout(() => {
                    splash.style.display = 'none';
                }, 500); 
            }, 2000);
        });
    </script>

</body>
</html>
